@using WebShopShared.Interfaces;
@using WebShopShared.Models;

@code {
	[Inject]
	private IProductService? _productService { get; set; }
	[Parameter]
	public EventCallback<Product> OnProductLoaded { get; set; }
	[Parameter]
	public int Id { get; set; }

	private Product? _product;

	protected override async Task OnInitializedAsync()
	{
		if (_productService == null)
		{
			throw new InvalidOperationException("ProductService is not available");
		}

		_product = await _productService.GetProduct(Id);
		await OnProductLoaded.InvokeAsync(_product);
	}
}
